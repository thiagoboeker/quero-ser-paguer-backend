searchNodes=[{"ref":"PagBackend.html","title":"PagBackend","type":"module","doc":"Versão em Elixir do desafio de backend da pag! S.A para desenvolvedores. Para visualizar o codigo fonte das funcoes, clique no icone &lt;/&gt; no canto superior direito da assinatura da funcao. Consideracoes Sem Phoenix? Phoenix é o framework mais famoso de Elixir para web, ele é construido encima das libs Cowboy e Plug que sao usadas ostensivamente aqui. Porem ele traz uma bagagem para aplicacoes maiores com conceitos de DDD e Channels e muitas outras coisas que nao seriam utilizadas. Entao optei por nao usa-lo. Pattern Matching, o que é isso? Eu estou a um bom tempo investindo em FP, e umas das features mais legais que eu gosto de usaré o Pattern Matching. Entao se voce ver coisas como isso aqui, eu explico. Exemplos iex&gt; [a, b, :ok] = [1, 2, :ok] [1, 2, :ok] iex&gt; [a, b] [1, 2] Como visto, o lado direito se equipara ao lado esquerdo de todas maneiras, sendo assim as variaveis a e b agora valem respectivamente 1 e 2 para a equivalencia ser alcançada. A vantagem desse tipo de abordagem é a possibilidade de asserção entre os lados, lançando uma exceção quando a equivalencia nao é alcançada, deixando o codigo mais seguro por crashar uma presunção errada de matching, na minha opinião isso é algo muito poderoso.Deixando bem claro que nao estou lecionando para ninguem, tenho certeza que gente mais capacitada que inclusive pode me ensinar uma coisa ou duas pode estar lendo. Apenas explicitando as minhas preferencias para se entender melhor o estilo do meu codigo. Testes Os suites de testes apesar de pequenos cobrem um bocado. Só lembrando que a ausencia dos assertions é justamente devido ao pattern matching nas chamadasdas funcoes, causando uma certa redundancia pois se o PM falhar sera lançada uma exceção falhando assim o teste. Estrutura Cada modulo da API tem a seguinte estrutura. Primeiro um Plug para receber a conexão, pode ser feito algum tratamento adicional e depois a conexao é enviada para um Plug.Router. Decisões Minhas decisões sao baseadas em boas praticas que eu acredito. Entao pra expor um pouco oq eu penso eu posso dizer que eu favoreço coesão ao inves de acoplamento, expressividade ao invés de reusabilidade. Docker Elixir tem uma maneira bem unica e facil de fazer deploy com releases. Ainda pode dockerizar."},{"ref":"PagBackend.Api.html","title":"PagBackend.Api","type":"module","doc":"Helper com funcoes gerais para auxiliar na construção dos modulos."},{"ref":"PagBackend.Api.html#check_halted_conn/2","title":"PagBackend.Api.check_halted_conn/2","type":"function","doc":"Checa por um halt em uma requisicao que foi invalidada."},{"ref":"PagBackend.Api.html#get_authorization_header/1","title":"PagBackend.Api.get_authorization_header/1","type":"function","doc":"Verifica para o header de Authorization e Splita o Bearer retornando a token."},{"ref":"PagBackend.Api.html#handle_error/2","title":"PagBackend.Api.handle_error/2","type":"function","doc":"Checa para erros na requisição, agrupa os erros e invoca o callback passado."},{"ref":"PagBackend.Api.html#handle_success/2","title":"PagBackend.Api.handle_success/2","type":"function","doc":"Checa para resposta a requisições bem sucedidas"},{"ref":"PagBackend.Api.html#traverse_errors_/1","title":"PagBackend.Api.traverse_errors_/1","type":"function","doc":"Atravessa os erros gerados pelo changeset substituindo as variaves."},{"ref":"PagBackend.Api.AWS.html","title":"PagBackend.Api.AWS","type":"module","doc":"Esse modulo contem o dominio/interface das funcionalidades da AWS dentro da API Note: Para as funcoes que interagem com o API cognito, cheque as regras de parametrizacao declaradas na criacao do pool/cliente."},{"ref":"PagBackend.Api.AWS.html#aws_delete_user/1","title":"PagBackend.Api.AWS.aws_delete_user/1","type":"function","doc":"Delete um usuario do Cognito"},{"ref":"PagBackend.Api.AWS.html#aws_init_auth/1","title":"PagBackend.Api.AWS.aws_init_auth/1","type":"function","doc":"Inicia o processo de autenticacao do usuario. O parametro de autenticacao é USER_PASSWORD_AUTH. Por default para primeiro login com o password temporario, se o usuario estiver com o status de FORCE_CHANGE_PASSWORD essa funcao retorna um Challenge para ser requisitado a mudanca de senha para o cliente com a funcao aws_respond_challenge/1. Caso contrario retorna as devidas tokens."},{"ref":"PagBackend.Api.AWS.html#aws_register_user/1","title":"PagBackend.Api.AWS.aws_register_user/1","type":"function","doc":"Funcao para registrar um usuario dentro do AWS Cognito"},{"ref":"PagBackend.Api.AWS.html#aws_register_user_with_pass/2","title":"PagBackend.Api.AWS.aws_register_user_with_pass/2","type":"function","doc":"Registra um usuario com o password temporario especificado"},{"ref":"PagBackend.Api.AWS.html#aws_respond_challenge/1","title":"PagBackend.Api.AWS.aws_respond_challenge/1","type":"function","doc":"Responde o challenge do processo de autenticacao. Para a v1 essa funcao atende apenas ao parametro NEW_PASSWORD_REQUIRED"},{"ref":"PagBackend.Api.Aws.Account.html","title":"PagBackend.Api.Aws.Account","type":"module","doc":"Modulo responsavel pela interface da conta de servico da AWS"},{"ref":"PagBackend.Api.Aws.Account.html#aws_client/0","title":"PagBackend.Api.Aws.Account.aws_client/0","type":"function","doc":"Retorna um objeto AWS.Client para ser usado em chamadas da API da AWS."},{"ref":"PagBackend.Api.Aws.Client.html","title":"PagBackend.Api.Aws.Client","type":"module","doc":"API para gerenciar usuarios do Cognito."},{"ref":"PagBackend.Api.Aws.Client.html#create_client/1","title":"PagBackend.Api.Aws.Client.create_client/1","type":"function","doc":"Cria um cliente para ser inserido na UserPool"},{"ref":"PagBackend.Api.Aws.Client.html#create_client_temp_pass/2","title":"PagBackend.Api.Aws.Client.create_client_temp_pass/2","type":"function","doc":"Mesma coisa que create_client/1 porem pode ser configurado um password temporario especifico."},{"ref":"PagBackend.Api.Aws.Client.html#delete_client/1","title":"PagBackend.Api.Aws.Client.delete_client/1","type":"function","doc":"Cria o objeto para deletar o cliente."},{"ref":"PagBackend.Api.Aws.Login.html","title":"PagBackend.Api.Aws.Login","type":"module","doc":"API para login e autenticacao dos clientes."},{"ref":"PagBackend.Api.Aws.Login.html#jwk/0","title":"PagBackend.Api.Aws.Login.jwk/0","type":"function","doc":"Retorna as keys do JWK baixado do link de referencia da UserPool do projeto.O caminho usado esta configurado no ambiente como cognito_jwk_path."},{"ref":"PagBackend.Api.Aws.Login.html#respond_challenge/2","title":"PagBackend.Api.Aws.Login.respond_challenge/2","type":"function","doc":"Responde ao challenge NEW_PASSWORD_REQUIRED com o novo password do cliente."},{"ref":"PagBackend.Api.Aws.Login.html#token_id_decode/2","title":"PagBackend.Api.Aws.Login.token_id_decode/2","type":"function","doc":"Decodifica o IdToken recebido."},{"ref":"PagBackend.Api.DAO.html","title":"PagBackend.Api.DAO","type":"module","doc":"Database wrapper para funcoes basicas de banco de dados"},{"ref":"PagBackend.Api.DAO.html#all/2","title":"PagBackend.Api.DAO.all/2","type":"function","doc":"Retorna todos as rows do schema passado"},{"ref":"PagBackend.Api.DAO.html#create/3","title":"PagBackend.Api.DAO.create/3","type":"function","doc":"Cria um registro no banco de dados."},{"ref":"PagBackend.Api.DAO.html#delete/2","title":"PagBackend.Api.DAO.delete/2","type":"function","doc":"Deleta um registro da tabela do schema."},{"ref":"PagBackend.Api.DAO.html#preload/2","title":"PagBackend.Api.DAO.preload/2","type":"function","doc":"Carrega relationships de chaves estrangeiras do schema"},{"ref":"PagBackend.Api.DAO.html#show/2","title":"PagBackend.Api.DAO.show/2","type":"function","doc":"Atraves do schema e de um id, retorna a row no formato {:ok, row}"},{"ref":"PagBackend.Dispatcher.html","title":"PagBackend.Dispatcher","type":"module","doc":"Modulo responsavel pela multiplexação das rotas da API"},{"ref":"PagBackend.Dispatcher.html#dispatch/0","title":"PagBackend.Dispatcher.dispatch/0","type":"function","doc":"Funcao que contem a logica das rotas da API"},{"ref":"PagBackend.Dispatcher.html#route/1","title":"PagBackend.Dispatcher.route/1","type":"function","doc":"Gera as rotas da api com a versao apropriada."}]